<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta content="width=device-width, initial-scale=1" name="viewport" />
    <meta content="Blog Post" name="description" />
    <link href="https://fonts.googleapis.com" rel="preconnect" />
    <link crossorigin="" href="https://fonts.gstatic.com" rel="preconnect" />
    <link
      href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;700&amp;display=swap"
      rel="stylesheet"
    />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
    />
    <link href="../../styles.css" rel="stylesheet" />
    <title>Robot Javelin</title>
    <link href="../../favicon.ico" rel="shortcut icon" type="image/x-icon" />
  </head>
  <body class="light" id="top">
    <header class="header center">
      <h3><a class="link" href="https://jayyhk.github.io">JM.</a></h3>
      <nav class="nav center">
        <ul class="nav__list center">
          <li class="nav__list-item">
            <a class="link link--nav" href="../../#projects">Projects</a>
          </li>
          <li class="nav__list-item">
            <a class="link link--nav" href="../../#blog">Blog</a>
          </li>
          <li class="nav__list-item">
            <a class="link link--nav" href="../../#music">Music</a>
          </li>
          <li class="nav__list-item">
            <a class="link link--nav" href="../../#contact">Contact</a>
          </li>
        </ul>
        <button aria-label="toggle theme" class="btn btn--icon" type="button">
          <i aria-hidden="true" class="fas fa-moon" id="btn-theme"></i></button
        ><button
          aria-label="toggle navigation"
          class="btn btn--icon nav__hamburger"
          type="button"
        >
          <i aria-hidden="true" class="fas fa-bars"></i>
        </button>
      </nav>
    </header>
    <main>
      <!-- Blog Post -->
      <section class="section blog-post">
        <h1 class="title">Robot Javelin</h1>
        <h3 class="date">January 25, 2026</h3>
        <div class="post-content">
          <p class="blog-paragraph">
            I apologize for this post being a bit late! It was December: a time
            for festivities, my birthday, vacation, ...and finals. I also almost
            didn't get my solution in on time, as I attempted the problem on the
            very last day of the year. Anyway, here is Jane Street's December
            2025 puzzle,
            <a
              class="link"
              href="https://www.janestreet.com/puzzles/robot-javelin-index/"
              target="_blank"
            >
              Robot Javelin </a
            >:
          </p>
          <div class="quote-indent blog-paragraph">
            <p class="blog-paragraph">
              It's coming to the end of the year, which can only mean one thing:
              time for this year's Robot Javelin finals! Whoa wait, you've never
              heard of Robot Javelin? Well then! Allow me to explain the rules:
            </p>
            <ul
              style="
                margin-bottom: 1em;
                margin-left: 2em;
                list-style-type: disc;
              "
            >
              <li style="margin-bottom: 0.5em">
                It's head-to-head. Each of two robots makes their first throw,
                whose distance is a real number drawn uniformly from $[0, 1]$.
              </li>
              <li style="margin-bottom: 0.5em">
                Then, without knowledge of their competitor's result, each robot
                decides whether to keep their current distance or erase it and
                go for a second throw, whose distance they must keep (it is also
                drawn uniformly from $[0, 1]$).
              </li>
              <li style="margin-bottom: 0.5em">
                The robot with the larger final distance wins.
              </li>
            </ul>
            <p class="blog-paragraph">
              This year's finals pits your robot, Java-lin, against the
              challenger, Spears Robot. Now, robots have been competing
              honorably for years and have settled into the Nash equilibrium for
              this game. However, you have just learned that Spears Robot has
              found and exploited a leak in the protocol of the game. They can
              receive a single bit of information telling them whether their
              opponent's first throw (distance) was above or below some
              threshold $d$ of their choosing before deciding whether to go for
              a second throw. Spears has presumably chosen $d$ to maximize their
              chance of winning â€” no wonder they made it to the finals!
            </p>
            <p class="blog-paragraph">
              Spears Robot isn't aware that you've learned this fact; they are
              assuming Java-lin is using the Nash equilibrium. If you were to
              adjust Java-lin's strategy to maximize its odds of winning given
              this, what would be Java-lin's updated probability of winning?
              Please give the answer in exact terms, or as a decimal rounded to
              10 places.
            </p>
          </div>
          <p class="blog-paragraph">
            Before we attempt to exploit the "leak" in the game, let's first
            figure out how the fair version of the game works. We know the
            robots have settled into Nash equilibrium, so we should figure out
            the threshold for going for a second throw. Let's call this
            threshold $k$.
          </p>
          <p class="blog-paragraph">
            To find the optimal $k$, the probability of winning by keeping the
            first throw must equal the probability of winning by going for a
            second throw at the threshold $k$. So we have
          </p>
          <div class="blog-math">
            \[ \text{Pr[We Win } | \text{ We Keep}] = \text{Pr[We Win } | \text{
            We Throw Again}] \]
          </div>
          <p class="blog-paragraph">
            If we keep a throw $\geq k$, then we only win if Spears throws lower
            than $k$. For Spears to throw lower than $k$, their first throw must
            be less than $k$ (probability $k$), and then their second throw must
            also be less than $k$ (probability $k$). Thus,
          </p>
          <div class="blog-math">
            \[ \text{Pr[We Win } | \text{ We Keep}] = k \cdot k = k^2 \]
          </div>
          <p class="blog-paragraph">
            If we go for a second throw, we win if our second throw is greater
            than Spears' final throw. There are two scenarios: either they keep
            their first throw or go for a second throw.
          </p>
          <ol class="case-list">
            <li>
              <p class="blog-paragraph">
                If Spears keeps their first throw, they must have rolled higher
                than $k$ (probability $1-k$). The probability that our second
                throw in $[0, 1]$ is greater than their first throw in $[k, 1]$
                is $\frac{1 - k}{2}$. Therefore, the probability of us winning
                in this case is
              </p>
              <div class="blog-math">
                \[ \text{Pr[We Win } |~(\text{We Throw Again } \cap \text{ Spears Keeps})] = (1-k) \cdot \frac{1-k}{2} = \frac{(1-k)^2}{2}
                \]
              </div>
            </li>
            <li>
              <p class="blog-paragraph">
                If Spears goes for a second throw, they must have thrown less
                than $k$ (probability $k$). The probability that our second
                throw in $[0, 1]$ is greater than their second throw in $[0, 1]$
                is $\frac{1}{2}$. Therefore, the probability of us winning in
                this case is
              </p>
              <div class="blog-math">
                \[ \text{Pr[We Win } |~(\text{We Throw Again } \cap \text{ Spears Throws Again})] = k \cdot \frac{1}{2} = \frac{k}{2} \]
              </div>
            </li>
          </ol>
          <p class="blog-paragraph">
            Summing these two cases gives us the total probability of winning by
            going for a second throw:
          </p>
          <div class="blog-math">
            \[ \text{Pr[We Win | We Throw Again]} = \frac{(1-k)^2}{2} +
            \frac{k}{2} = \frac{k^2 - 2k + 1 + k}{2} = \frac{k^2 - k + 1}{2} \]
          </div>
          <p class="blog-paragraph">
            Setting the two probabilities equal to each other, we have
          </p>
          <div class="blog-math">
            \begin{align*} \text{Pr[We Win | We Keep}] &= \text{Pr[We Win | We Throw Again]} \\ k^2 &= \frac{k^2 - k + 1}{2} \\ 2k^2 &= k^2 - k + 1
            \\ k^2 + k - 1 &= 0 \\ k &= \frac{-1 \pm \sqrt{1 + 4}}{2} = \frac{-1
            \pm \sqrt{5}}{2} \end{align*}
          </div>
          <p class="blog-paragraph">
            We take the positive root since $k$ must be in $[0, 1]$, so
            $k=\frac{\sqrt{5} - 1}{2} = \varphi^{-1}$, where $\varphi$ is the
            golden ratio! So in a standard game of Robot Javelin, the robots
            will go for a second throw if their first throw is less than
            $\varphi^{-1}$. Note that this value is approximately $0.618$.
          </p>
          <p class="blog-paragraph">
            Now let's consider the modified game where Spears can receive a bit
            of information if our first throw is below or above a certain
            threshold $d$. To maximize their chances of winning, Spears should
            choose a threshold of $d = k = \varphi^{-1}$. This is because if our
            first throw is below $\varphi^{-1}$, they know we will go for a
            second throw, and if our first throw is above $\varphi^{-1}$, they
            know we will keep our first throw. This choice of $d$ maximizes the
            information gained for Spears.
          </p>
          <p class="blog-paragraph">
            Spears can adjust their strategy accordingly by changing their
            original threshold of $\varphi^{-1}$ to a new threshold $t$ based on
            the bit they receive. If Spears receives a bit indicating our first
            throw is below $\varphi^{-1}$, they believe we will go for a second
            throw that will be uniformly distributed in $[0, 1]$. In this case,
            Spears should make $t$ equal to $\frac{1}{2}$ to maximize their
            probability of winning, as it is the median of the uniform
            distribution.
          </p>
          <p class="blog-paragraph">
            If Spears receives a bit indicating our first throw is above
            $\varphi^{-1}$, they know we have thrown a value in $[\varphi^{-1},
            1]$ and believe we will keep it. Spears can now do one of two
            things:
          </p>
          <ol class="case-list">
            <li>
              <p class="blog-paragraph">
                Spears can rethrow if their first throw is below $t$. Regardless
                of $t$, they will win with probability $\frac{1 -
                \varphi^{-1}}{2}$, as the probability that their second throw in
                $[0, 1]$ is greater than our first throw in $[ \varphi^{-1}, 1]$
                is $\frac{1 - \varphi^{-1}}{2}$.
              </p>
            </li>
            <li>
              <p class="blog-paragraph">
                Spears can keep their first throw as long as it's above $t$. If
                Spears keeps a throw $\geq t$, they win only if our throw is
                lower than $t$. Since our throw is uniformly distributed in
                $[\varphi^{-1}, 1]$, the probability that Spears wins by keeping
                their first throw is $\frac{t - \varphi^{-1}}{1 -
                \varphi^{-1}}$.
              </p>
            </li>
          </ol>
          <p class="blog-paragraph">
            Like before, to find Spears' new threshold $t$, the probability of
            them winning by keeping their first throw must equal the probability
            of them winning by going for a second throw at the threshold $t$.
            Thus, we have
          </p>
          <div class="blog-math">
            \begin{align*} \text{Pr[Spears Wins } | \text{ Spears Keeps}] &=
            \text{Pr[Spears Wins } | \text{ Spears Throws Again}] \\ \frac{t -
            \varphi^{-1}}{1 - \varphi^{-1}} &= \frac{1 - \varphi^{-1}}{2} \\ t -
            \varphi^{-1} &= \frac{(1 - \varphi^{-1})^2}{2} \\ t &= \frac{1 -
            2\varphi^{-1} + (\varphi^{-1})^2}{2} + \varphi^{-1} \\ t &= \frac{1
            + (\varphi^{-1})^2}{2} \\ t &= \frac{1 + 1 - \varphi^{-1}}{2} \\ t
            &= 1 - \frac{\varphi^{-1}}{2} \end{align*}
          </div>
          <p class="blog-paragraph">
            which was simplified using the identity $(\varphi^{-1})^2 = 1 -
            \varphi^{-1}$. Therefore, Spears' new threshold is $t = 1 -
            \frac{\varphi^{-1}}{2} \approx 0.691$.
          </p>
          <p class="blog-paragraph">
            So to recap, Spears' new strategy is to use the following
            conditional threshold:
          </p>
          <div class="blog-math">
            ${ t = \begin{cases} \frac{1}{2}, & \text{if our first throw is} <
            \varphi^{-1} \\ 1 - \frac{\varphi^{-1}}{2}, & \text{if our first throw is} \geq \varphi^{-1} \end{cases} }$
          </div>
          <p class="blog-paragraph">
            Now we can calculate our updated probability of winning against
            Spears using their new strategy. There are two cases to consider
            based on our first throw:
          </p>
          <p class="blog-paragraph">
            If our first throw is above $\varphi^{-1}$ (probability
            $1-\varphi^{-1}$), we will keep our first throw. If we rethrow, then
            we reset to a random throw in $[0, 1]$, which has an average value
            of $\frac{1}{2}$. This is worse than keeping our first throw, so we
            will keep it.
          </p>
          <p class="blog-paragraph">
            If our first throw is below $\varphi^{-1}$ (probability
            $\varphi^{-1}$), something interesting happens. Spears assumes that
            if our throw is below $\varphi^{-1}$, we will always rethrow. They
            then lower their threshold to $\frac{1}{2}$, which creates an
            opening. In the standard game, a throw of $0.60$ is considered "bad"
            (because it's below $\varphi^{-1}$). But against an opponent who is
            willing to keep a throw of $0.51$, a throw of $0.60$ is actually
            quite strong! Therefore, we should calculate a new threshold $j$ for
            ourselves to decide whether to go for a second throw.
          </p>
          <ol class="case-list">
            <li>
              <p class="blog-paragraph">
                If we rethrow, we get a random value in $[0, 1]$. With a
                threshold of $t = \frac{1}{2}$, Spears has a $50\%$ chance of
                throwing below $t$, in which case they will rethrow. We have a
                $50\%$ chance of beating their second throw in $[0, 1]$. So
                there is a $\frac{1}{2} \cdot \frac{1}{2} = \frac{1}{4}$ chance
                of us winning by rethrowing if Spears rethrows. If Spears keeps
                their first throw, they must have thrown above $t$, which occurs
                with probability $\frac{1}{2}$. The probability that our random
                throw in $[0, 1]$ then beats their first throw in $[\frac{1}{2},
                1]$ is $\frac{1 - 1/2}{2} = \frac{1}{4}$. Thus, there is a
                $\frac{1}{2} \cdot \frac{1}{4} = \frac{1}{8}$ chance of us
                winning by rethrowing if Spears keeps. So in total, we have
              </p>
              <div class="blog-math">
                \[ \text{Pr[We Win } | \text{ We Throw Again}] = \frac{1}{4} +
                \frac{1}{8} = \frac{3}{8} \]
              </div>
            </li>
            <li>
              <p class="blog-paragraph">
                If we keep our first throw at $j$, then $j$ must be above $t$.
                Otherwise, if Spears keeps their throw (which means they have a
                value in $[t, 1]$), we are guaranteed to lose. Spears has a
                $50\%$ chance of throwing below $t$, in which case they will
                rethrow. We win if their new throw in $[0, 1]$ is below $j$,
                which occurs with probability $j$. Thus, there is a
                $\frac{j}{2}$ chance of us winning by keeping if Spears
                rethrows. If Spears keeps their first throw, they must have
                thrown above $t$, which occurs with probability $\frac{1}{2}$.
                The chance that our throw of $j$ beats their throw in
                $[\frac{1}{2}, 1]$ is $\frac{j - 1/2}{1/2} = 2j - 1$. Thus,
                there is a $\frac{1}{2} \cdot (2j - 1) = j - \frac{1}{2}$ chance
                of us winning by keeping if Spears keeps. So in total, we have
              </p>
              <div class="blog-math">
                \[ \text{Pr[We Win } | \text{ We Keep}] = \frac{j}{2} + j -
                \frac{1}{2} = \frac{3j}{2} - \frac{1}{2} \]
              </div>
            </li>
          </ol>
          <p class="blog-paragraph">
            Setting the two probabilities equal to each other for the third
            time, we have
          </p>
          <div class="blog-math">
            \begin{align*} \text{Pr[We Win } | \text{ We Throw Again}] &=
            \text{Pr[We Win } | \text{ We Keep]} \\ \frac{3}{8} &= \frac{3j}{2}
            - \frac{1}{2} \\ \frac{7}{8} &= \frac{3j}{2} \\ \frac{14}{8} &= 3j
            \\ j &= \frac{7}{12} \end{align*}
          </div>
          <p class="blog-paragraph">
            So our new threshold is $j = \frac{7}{12} \approx 0.583$.
            Intuitively, this makes sense. We can relax our threshold below our
            original $\varphi^{-1} \approx 0.618$ because Spears has lowered
            their guard to $0.5$, meaning "mediocre" throws like $0.6$ for us
            that used to lose are now strong enough for us to win. However, we
            must stay significantly above $0.5$ to ensure we have a buffer to
            beat the range of values Spears might keep.
          </p>
          <p class="blog-paragraph">
            We can now calculate our overall probability of winning against
            Spears with their new strategy and our new strategy. We can split
            the game into cases based on our first throw. Let's call it $x$.
          </p>
          <ol class="case-list">
            <li>
              The first case is $0 \leq x < \frac{7}{12}$. In this case, we
              rethrow and Spears will either keep or rethrow with their
              threshold of $t=\frac{1}{2}$. We have a $\frac{3}{8}$ chance of
              winning as calculated before.
            </li>
            <li>
              The second case is $\frac{7}{12} \leq x < \varphi^{-1}$. In this
              case, we keep our first throw and Spears will either keep or
              rethrow with their threshold of $t=\frac{1}{2}$. We have a
              $\frac{3x}{2} - \frac{1}{2}$ chance of winning as calculated
              before.
            </li>
            <li>
              The third case is $\varphi^{-1} \leq x \leq 1$. In this case, we
              keep our first throw and Spears will either keep or rethrow with
              their threshold of $t = 1 - \frac{\varphi^{-1}}{2}$. Observe that
              $t \approx 0.691$ is between $\varphi^{-1} \approx 0.618$ and $1$.
              This means we have to split into two sub-cases: if $x < t$, we
              only win if Spears rethrows (probability $t$) and loses
              (probability $x$), giving a win chance of $tx$. If $x \geq t$, we
              win if Spears rethrows and loses (probability $tx$) OR if Spears
              keeps and loses (probability $x-t$). Overall, for $x \in
              [\varphi^{-1}, 1-\frac{\varphi^{-1}}{2}]$ we win with probability
              $tx = (1 - \frac{\varphi^{-1}}{2})x$, and for $x \in
              [1-\frac{\varphi^{-1}}{2}, 1]$ we win with probability $tx + x - t
              = t(x - 1) + x = (1 - \frac{\varphi^{-1}}{2})(x - 1) + x$.
            </li>
          </ol>
          <p class="blog-paragraph">
            Finally, to find our overall probability of winning, we can
            integrate over all possible values of $x$:
          </p>
          <ol class="case-list">
            <li>For $0 \leq x < \frac{7}{12}$, we have</li>
            <div class="blog-math">
              \[ \int_0^{7/12} \frac{3}{8} \, \mathrm{d}x = \left. \frac{3x}{8}
              \right|_0^{7/12} = \frac{7}{32} \]
            </div>
            <li>For $\frac{7}{12} \leq x < \varphi^{-1}$, we have</li>
            <div class="blog-math">
              \begin{align*} \int_{7/12}^{\varphi^{-1}} \left( \frac{3x}{2} -
              \frac{1}{2} \right) \, \mathrm{d}x &= \left. \left( \frac{3x^2}{4}
              - \frac{x}{2} \right) \right|_{7/12}^{\varphi^{-1}} \\ &=
              \frac{3(\varphi^{-1})^2}{4} - \frac{\varphi^{-1}}{2} - \left(
              \frac{3(7/12)^2}{4} - \frac{7/12}{2} \right) \\ &=
              \frac{3(\varphi^{-1})^2}{4} - \frac{\varphi^{-1}}{2} +
              \frac{7}{192} \end{align*}
            </div>
            <li>
              For $\varphi^{-1} \leq x < 1 - \frac{\varphi^{-1}}{2}$, we have
            </li>
            <div class="blog-math">
              \begin{align*} \int_{\varphi^{-1}}^{1 - \varphi^{-1}/2} \left( 1 -
              \frac{\varphi^{-1}}{2} \right) x \, \mathrm{d}x &= \left. \left( 1
              - \frac{\varphi^{-1}}{2} \right) \frac{x^2}{2}
              \right|_{\varphi^{-1}}^{1 - \varphi^{-1}/2} \\ &= \left( 1 -
              \frac{\varphi^{-1}}{2} \right) \left( \frac{(1 -
              \varphi^{-1}/2)^2}{2} - \frac{(\varphi^{-1})^2}{2} \right) \\ &=
              \frac{1}{2} \left( 1 - \frac{\varphi^{-1}}{2} \right) \left(
              \left( 1 - \frac{\varphi^{-1}}{2} \right)^2 - (\varphi^{-1})^2
              \right) \end{align*}
            </div>
            <li>For $1 - \frac{\varphi^{-1}}{2} \leq x \leq 1$, we have</li>
            <div class="blog-math">
              \begin{align*} \int_{1 - \varphi^{-1}/2}^1 \left( \left( 1 -
              \frac{\varphi^{-1}}{2} \right) (x - 1) + x \right) \, \mathrm{d}x
              &= \left. \left( \left( 1 - \frac{\varphi^{-1}}{2} \right)
              \frac{(x-1)^2}{2} + \frac{x^2}{2} \right) \right|_{1 -
              \varphi^{-1}/2}^1 \\ &= \frac{1}{2} - \left( \left( 1 -
              \frac{\varphi^{-1}}{2} \right) \frac{(1 - \varphi^{-1}/2 -
              1)^2}{2} + \frac{(1 - \varphi^{-1}/2)^2}{2} \right) \\ &=
              \frac{1}{2} - \frac{1}{2} \left( 1 - \frac{\varphi^{-1}}{2}
              \right) \left( 1 - \frac{\varphi^{-1}}{2} +
              \frac{\left(\varphi^{-1}\right)^2}{4} \right) \\ \end{align*}
            </div>
          </ol>
          <p class="blog-paragraph">
            After adding all these cases together and simplifying carefully, we
            find our overall probability of winning against Spears is
          </p>
          <div class="blog-math">
            \[ \frac{229 - 60\sqrt{5}}{192} \approx 0.4939370904 \]
          </div>
          <p class="blog-paragraph">
            So we are <em>almost</em> able to get our odds to $50/50$ against
            Spears, even with their advantage! This is quite impressive, as it
            shows that by adapting our strategy to exploit their assumptions, we
            can nearly neutralize their edge. Overall, this was a very
            math-heavy problem that combined game theory, probability, and
            calculus, and it was neat seeing the golden ratio show up.
          </p>
        </div>
      </section>
    </main>
    <footer class="footer"></footer>
    <div class="scroll-arrow"></div>
    <script src="../../script.js"></script>
    <script>
      MathJax = {
        tex: {
          inlineMath: [
            ["$", "$"],
            ["\\(", "\\)"],
          ],
        },
        svg: {
          fontCache: "global",
        },
      };
    </script>
    <script
      async=""
      id="MathJax-script"
      src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-svg.js"
    ></script>
  </body>
</html>
